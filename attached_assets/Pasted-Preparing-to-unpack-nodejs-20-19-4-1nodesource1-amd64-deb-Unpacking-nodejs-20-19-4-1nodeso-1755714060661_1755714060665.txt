Preparing to unpack .../nodejs_20.19.4-1nodesource1_amd64.deb ...
Unpacking nodejs (20.19.4-1nodesource1) over (12.22.9~dfsg-1ubuntu3.6) ...
dpkg: error processing archive /var/cache/apt/archives/nodejs_20.19.4-1nodesource1_amd64.deb (--unpack):
 trying to overwrite '/usr/include/node/common.gypi', which is also in package libnode-dev 12.22.9~dfsg-1ubuntu3.6
dpkg-deb: error: paste subprocess was killed by signal (Broken pipe)
Errors were encountered while processing:
 /var/cache/apt/archives/nodejs_20.19.4-1nodesource1_amd64.deb
E: Sub-process /usr/bin/dpkg returned an error code (1)
[STEP] Setting up PostgreSQL...
Synchronizing state of postgresql.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable postgresql
[STEP] Creating database and user...
could not change directory to "/root/SafetyReportr": Permission denied
NOTICE:  database "isg_reports" does not exist, skipping
DROP DATABASE
NOTICE:  role "isg_user" does not exist, skipping
DROP ROLE
CREATE DATABASE
CREATE ROLE
GRANT
ALTER ROLE
GRANT
[STEP] Creating system user...
Warning: The home dir /opt/isg-reports you specified already exists.
Adding system user `isg' (UID 115) ...
Adding new group `isg' (GID 121) ...
Adding new user `isg' (UID 115) with group `isg' ...
The home directory `/opt/isg-reports' already exists.  Not copying from `/etc/skel'.
adduser: Warning: The home directory `/opt/isg-reports' does not belong to the user you are currently creating.
[STEP] Setting up application files...
[STEP] Setting up environment...
‚úÖ Environment configured
[STEP] Fixing package.json scripts...
‚úÖ Package.json scripts added
[STEP] Installing dependencies...
bash: line 1: npm: command not found
[STEP] Setting up database schema...
bash: line 1: npm: command not found
[STEP] Creating admin user...
bash: line 1: npx: command not found
[STEP] Building production bundle...
bash: line 1: npm: command not found
[STEP] Setting up systemd service...
Created symlink /etc/systemd/system/multi-user.target.wants/isg-reports.service ‚Üí /etc/systemd/system/isg-reports.service.
[STEP] Starting service...
[STEP] Configuring firewall...
Firewall is active and enabled on system startup
Rule added
Rule added (v6)
Rule added
Rule added (v6)
[ERROR] ‚ùå Service failed to start!
üîç Debugging steps:
1. Check service status: systemctl status isg-reports
2. Check logs: journalctl -u isg-reports -f
3. Manual test: sudo -u isg bash -c 'cd /opt/isg-reports && npm run start'
4. Check database: sudo -u postgres psql -d isg_reports -c 'SELECT version();'
root@isgrapor:~/SafetyReportr#
